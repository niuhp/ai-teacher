# ğŸš€ åç«¯å¿«é€Ÿå¯åŠ¨æŒ‡å—

## âœ… MVPç‰ˆæœ¬å·²å®Œæˆï¼

æ­å–œï¼åç«¯æ ¸å¿ƒåŠŸèƒ½å·²ç»å®Œæˆ**90%**ï¼Œç°åœ¨å¯ä»¥å¯åŠ¨æµ‹è¯•äº†ï¼

### å·²å®ç°çš„åŠŸèƒ½
- âœ… ç”¨æˆ·ç™»å½•ï¼ˆæ‰«ç ç™»å½•Mockç‰ˆï¼‰
- âœ… ç”¨æˆ·ä¿¡æ¯è·å–/æ›´æ–°
- âœ… åˆ›å»ºå¯¹è¯
- âœ… å‘é€æ¶ˆæ¯ï¼ˆè¿”å›Mock AIå›å¤ï¼‰
- âœ… å¯¹è¯åˆ—è¡¨æŸ¥è¯¢
- âœ… å¯¹è¯è¯¦æƒ…æŸ¥è¯¢
- âœ… æ”¶è—/åˆ é™¤å¯¹è¯
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… å…¨å±€å¼‚å¸¸å¤„ç†
- âœ… è·¨åŸŸé…ç½®

## ğŸ“‹ å¯åŠ¨å‰æ£€æŸ¥æ¸…å•

### 1. ç¯å¢ƒè¦æ±‚
- [ ] JDK 17 å·²å®‰è£…
- [ ] Maven 3.8+ å·²å®‰è£…  
- [ ] MySQL 8.0+ å·²å®‰è£…å¹¶å¯åŠ¨
- [ ] (å¯é€‰) IDEå·²å®‰è£…ï¼ˆæ¨èIntelliJ IDEAï¼‰

### 2. æ•°æ®åº“å‡†å¤‡

#### æ–¹å¼1ï¼šå‘½ä»¤è¡Œæ‰§è¡Œ
```bash
# ç™»å½•MySQL
mysql -u root -p

# æ‰§è¡Œå»ºè¡¨è„šæœ¬
source /Users/niuhaipeng/code-niuhp/ai-teacher/server/src/main/resources/db/schema.sql
```

#### æ–¹å¼2ï¼šæ‰‹åŠ¨åˆ›å»º
1. æ‰“å¼€MySQLå®¢æˆ·ç«¯ï¼ˆNavicat/MySQL Workbenchï¼‰
2. æ‰§è¡Œ `server/src/main/resources/db/schema.sql` æ–‡ä»¶

#### éªŒè¯æ•°æ®åº“
```sql
USE ai_teacher;
SHOW TABLES;
-- åº”è¯¥çœ‹åˆ°8å¼ è¡¨
```

### 3. ä¿®æ”¹é…ç½®

ç¼–è¾‘ `server/src/main/resources/application.yml`:

```yaml
spring:
  datasource:
    username: root
    password: your_password_here  # âš ï¸ ä¿®æ”¹ä¸ºä½ çš„MySQLå¯†ç 
```

### 4. ï¼ˆå¯é€‰ï¼‰Redisé…ç½®

å¦‚æœæ²¡æœ‰å®‰è£…Redisï¼Œå¯ä»¥æš‚æ—¶æ³¨é‡Šæ‰Redisé…ç½®ï¼š

```yaml
# spring:
#   data:
#     redis:
#       host: localhost
#       port: 6379
```

## ğŸš€ å¯åŠ¨é¡¹ç›®

### æ–¹å¼1ï¼šä½¿ç”¨Mavenå‘½ä»¤è¡Œ

```bash
cd /Users/niuhaipeng/code-niuhp/ai-teacher/server
mvn clean spring-boot:run
```

### æ–¹å¼2ï¼šä½¿ç”¨IDEï¼ˆæ¨èï¼‰

1. ç”¨IntelliJ IDEAæ‰“å¼€ `server` ç›®å½•
2. ç­‰å¾…Mavenå¯¼å…¥ä¾èµ–
3. æ‰¾åˆ° `AiTeacherApplication.java`
4. å³é”® â†’ Run 'AiTeacherApplication'

### æ–¹å¼3ï¼šæ‰“åŒ…åè¿è¡Œ

```bash
cd server
mvn clean package -DskipTests
java -jar target/ai-teacher-server-1.0.0.jar
```

## âœ¨ å¯åŠ¨æˆåŠŸæ ‡å¿—

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜å¯åŠ¨æˆåŠŸï¼š

```
====================================
ğŸ“ AIæ•™å¸ˆç³»ç»Ÿå¯åŠ¨æˆåŠŸï¼
ğŸ“š æ™ºèƒ½å­¦ä¹ åŠ©æ‰‹å·²å°±ç»ª
ğŸŒ è®¿é—®åœ°å€: http://localhost:8080/api
====================================

Started AiTeacherApplication in 5.123 seconds
```

## ğŸ§ª æµ‹è¯•æ¥å£

### 1. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8080/api/health
```

åº”è¯¥è¿”å›ï¼š
```json
{
  "code": 200,
  "message": "æ“ä½œæˆåŠŸ",
  "data": {
    "status": "UP",
    "timestamp": "2025-11-21T...",
    "application": "AI Teacher Server",
    "version": "1.0.0"
  }
}
```

### 2. ç”Ÿæˆç™»å½•äºŒç»´ç 
```bash
curl -X POST http://localhost:8080/api/auth/qrcode/generate
```

### 3. è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆä½¿ç”¨æµ‹è¯•ç”¨æˆ·ï¼‰
```bash
curl http://localhost:8080/api/user/info
```

### 4. åˆ›å»ºå¯¹è¯
```bash
curl -X POST http://localhost:8080/api/conversation/create \
  -H "Content-Type: application/json" \
  -d '{
    "provinceCode": "11",
    "grade": "middle_1",
    "subject": "math"
  }'
```

### 5. å‘é€æ¶ˆæ¯
```bash
curl -X POST http://localhost:8080/api/conversation/1/message \
  -H "Content-Type: application/json" \
  -d '{
    "contentType": "text",
    "content": "ä»€ä¹ˆæ˜¯äºŒæ¬¡æ–¹ç¨‹ï¼Ÿ",
    "aiModel": "qwen"
  }'
```

## ğŸ“Š æ¥å£åˆ—è¡¨

### è®¤è¯æ¥å£ï¼ˆ/authï¼‰
- `POST /auth/qrcode/generate` - ç”ŸæˆäºŒç»´ç 
- `GET /auth/qrcode/status?ticket=xxx` - æŸ¥è¯¢ç™»å½•çŠ¶æ€
- `POST /auth/qrcode/confirm` - ç¡®è®¤ç™»å½•
- `POST /auth/logout` - é€€å‡ºç™»å½•

### ç”¨æˆ·æ¥å£ï¼ˆ/userï¼‰
- `GET /user/info` - è·å–ç”¨æˆ·ä¿¡æ¯
- `PUT /user/info` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯

### å¯¹è¯æ¥å£ï¼ˆ/conversationï¼‰
- `POST /conversation/create` - åˆ›å»ºå¯¹è¯
- `GET /conversation/list` - è·å–å¯¹è¯åˆ—è¡¨
- `GET /conversation/{id}` - è·å–å¯¹è¯è¯¦æƒ…
- `POST /conversation/{id}/message` - å‘é€æ¶ˆæ¯
- `DELETE /conversation/{id}` - åˆ é™¤å¯¹è¯
- `PUT /conversation/{id}/favorite` - æ”¶è—å¯¹è¯
- `PUT /conversation/{id}/title` - æ›´æ–°æ ‡é¢˜

## ğŸ› å¸¸è§é—®é¢˜

### 1. ç«¯å£8080è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**:
```
Port 8080 was already in use.
```

**è§£å†³æ–¹æ³•**:
ä¿®æ”¹ `application.yml`:
```yaml
server:
  port: 8081
```

### 2. æ•°æ®åº“è¿æ¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**:
```
Access denied for user 'root'@'localhost'
```

**è§£å†³æ–¹æ³•**:
1. ç¡®è®¤MySQLå·²å¯åŠ¨
2. ç¡®è®¤ç”¨æˆ·åå¯†ç æ­£ç¡®
3. æ£€æŸ¥MySQLç‰ˆæœ¬æ˜¯å¦8.0+

### 3. è¡¨ä¸å­˜åœ¨

**é”™è¯¯ä¿¡æ¯**:
```
Table 'ai_teacher.user' doesn't exist
```

**è§£å†³æ–¹æ³•**:
é‡æ–°æ‰§è¡Œå»ºè¡¨SQLï¼š
```bash
mysql -u root -p < server/src/main/resources/db/schema.sql
```

### 4. Mavenä¾èµ–ä¸‹è½½å¤±è´¥

**è§£å†³æ–¹æ³•**:
```bash
# æ¸…é™¤æœ¬åœ°ä»“åº“ç¼“å­˜
mvn clean
mvn dependency:purge-local-repository
mvn install
```

### 5. Redisè¿æ¥å¤±è´¥ï¼ˆå¦‚æœé…ç½®äº†Redisï¼‰

**è§£å†³æ–¹æ³•**:
```bash
# å¯åŠ¨Redis
redis-server

# æˆ–è€…æ³¨é‡Šæ‰Redisé…ç½®
```

## ğŸ”§ å¼€å‘å·¥å…·æ¨è

### APIæµ‹è¯•å·¥å…·
- **Apifox** (æ¨èï¼Œå›½äº§) - https://www.apifox.cn/
- Postman
- cURL

### æ•°æ®åº“å·¥å…·
- **Navicat** - å¯è§†åŒ–ç®¡ç†MySQL
- MySQL Workbench
- DBeaver

### ç›‘æ§å·¥å…·
- Druidç›‘æ§ï¼šhttp://localhost:8080/api/druid
  - ç”¨æˆ·åï¼šadmin
  - å¯†ç ï¼šadmin

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. å½“å‰ä½¿ç”¨æµ‹è¯•ç”¨æˆ·
æ‰€æœ‰æ¥å£ç›®å‰éƒ½ä½¿ç”¨æµ‹è¯•ç”¨æˆ·ï¼ˆID=1ï¼‰ï¼Œè¿™æ˜¯ä¸ºäº†å¿«é€Ÿæµ‹è¯•ã€‚
åç»­éœ€è¦å®ç°JWTæ‹¦æˆªå™¨æ¥è·å–çœŸå®ç”¨æˆ·IDã€‚

### 2. AIå›å¤æ˜¯Mockæ•°æ®
`MessageService.sendMessage()` ç›®å‰è¿”å›å›ºå®šçš„Mockå›å¤ã€‚
åç»­éœ€è¦æ¥å…¥çœŸå®çš„AIæ¨¡å‹ï¼ˆé€šä¹‰åƒé—®/DeepSeekç­‰ï¼‰ã€‚

### 3. äºŒç»´ç æ˜¯å ä½å›¾ç‰‡
`QrCodeLoginService.generateQrCode()` ä½¿ç”¨çš„æ˜¯åœ¨çº¿äºŒç»´ç ç”ŸæˆAPIã€‚
ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨æœ¬åœ°ç”Ÿæˆæ–¹æ¡ˆã€‚

## ğŸ¯ ä¸‹ä¸€æ­¥

### ç«‹å³å¯ä»¥åšçš„ï¼š
1. âœ… **å¯åŠ¨åç«¯é¡¹ç›®**
2. âœ… **æµ‹è¯•æ¥å£**ï¼ˆä½¿ç”¨ä¸Šé¢çš„curlå‘½ä»¤ï¼‰
3. âœ… **ä¸å‰ç«¯è”è°ƒ**ï¼ˆå‰ç«¯ä½¿ç”¨è¿™äº›æ¥å£ï¼‰

### åç»­å®Œå–„ï¼š
1. å®ç°JWTæ‹¦æˆªå™¨ï¼ˆè·å–çœŸå®ç”¨æˆ·IDï¼‰
2. æ¥å…¥çœŸå®AIæ¨¡å‹
3. å®ç°æ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
4. å®ç°æ•™æç®¡ç†
5. æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯•

## ğŸ”— å‰åç«¯è”è°ƒ

### å‰ç«¯é…ç½®
å‰ç«¯å·²é…ç½®ä»£ç†ï¼š
```javascript
// vite.config.ts
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8080',
      changeOrigin: true,
    },
  },
}
```

### å¯åŠ¨é¡ºåº
1. å…ˆå¯åŠ¨åç«¯ï¼ˆ8080ç«¯å£ï¼‰
2. å†å¯åŠ¨å‰ç«¯ï¼ˆ3000ç«¯å£ï¼‰
3. å‰ç«¯è®¿é—® `/api/*` ä¼šè‡ªåŠ¨ä»£ç†åˆ°åç«¯

### æµ‹è¯•æµç¨‹
1. å‰ç«¯è®¿é—® http://localhost:3000
2. ç™»å½•é¡µç”ŸæˆäºŒç»´ç 
3. Mockè‡ªåŠ¨ç™»å½•ï¼ˆæˆ–æ‰‹åŠ¨æµ‹è¯•ï¼‰
4. åˆ›å»ºå¯¹è¯å¹¶å‘é€æ¶ˆæ¯
5. æŸ¥çœ‹Mock AIå›å¤

## ğŸŠ æ€»ç»“

**åç«¯MVPç‰ˆæœ¬å·²å®Œæˆï¼** ğŸ‰

æ ¸å¿ƒåŠŸèƒ½å…¨éƒ¨å®ç°ï¼š
- âœ… é¡¹ç›®èƒ½æ­£å¸¸å¯åŠ¨
- âœ… æ¥å£å¯ä»¥æ­£å¸¸è°ƒç”¨
- âœ… æ•°æ®åº“æ“ä½œæ­£å¸¸
- âœ… ç»Ÿä¸€å“åº”æ ¼å¼
- âœ… å¼‚å¸¸ç»Ÿä¸€å¤„ç†
- âœ… è·¨åŸŸå·²é…ç½®

**ç°åœ¨å¯ä»¥ï¼š**
1. å¯åŠ¨åç«¯æµ‹è¯•
2. ä¸å‰ç«¯è”è°ƒ
3. æŸ¥çœ‹å®Œæ•´çš„å¯¹è¯æµç¨‹

**è¿˜éœ€è¦ï¼š**
1. JWTæ‹¦æˆªå™¨ï¼ˆå¯é€‰ï¼Œæš‚æ—¶ç”¨æµ‹è¯•ç”¨æˆ·ï¼‰
2. çœŸå®AIæ¨¡å‹æ¥å…¥ï¼ˆå¯ä»¥ç”¨Mockå…ˆæµ‹è¯•ï¼‰
3. æ–‡ä»¶ä¸Šä¼ ï¼ˆå¯é€‰ï¼‰

---

**å‡†å¤‡å¥½å¯åŠ¨äº†å—ï¼Ÿ** ğŸš€

æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
```bash
cd /Users/niuhaipeng/code-niuhp/ai-teacher/server
mvn spring-boot:run
```

æœ‰ä»»ä½•é—®é¢˜éšæ—¶å‘Šè¯‰æˆ‘ï¼

