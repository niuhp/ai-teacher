# 🚀 快速启动指南

## ⚠️ 常见问题解决

### 问题1: 浏览器显示空白页

**原因：** Pinia Store 和 Vue Router 之间的循环依赖导致初始化失败。

**已修复：** 路由守卫现在直接从 localStorage 读取 token，避免了循环依赖。

### 问题2: 页面刷新后丢失登录状态

**原因：** 没有配置状态持久化。

**已修复：** Pinia stores 已配置 `persist: true`，状态会自动保存到 localStorage。

## 📝 启动步骤

### 1. 安装依赖（首次运行）

```bash
cd web
npm install
```

### 2. 启动开发服务器

```bash
npm run dev
```

服务器启动后会显示：

```
  VITE v5.x.x  ready in xxx ms

  ➜  Local:   http://localhost:3000/
  ➜  Network: http://192.168.x.x:3000/
```

### 3. 在浏览器中访问

打开浏览器访问：**http://localhost:3000**

你应该会看到**登录页面**（因为还没有token）。

## 🔍 验证页面是否正常

### ✅ 正常情况

- 看到精美的渐变背景
- 显示"AI教师"标题和Logo
- 显示"生成二维码中..."或二维码图片
- 底部显示三个功能介绍卡片

### ❌ 如果还是空白页

请按以下步骤排查：

#### 1. 检查浏览器控制台

按 `F12` 打开开发者工具，查看 Console 标签是否有错误信息：

```javascript
// 如果看到类似错误：
Failed to resolve module specifier "@/xxx"
// 说明路径别名配置有问题

// 如果看到：
Uncaught SyntaxError: ...
// 说明代码有语法错误
```

#### 2. 检查 Network 标签

- 确认是否成功加载了 `index.html`
- 确认是否加载了 `src/main.ts`
- 查看有没有 404 错误

#### 3. 清除浏览器缓存

```bash
# Chrome/Edge
Ctrl + Shift + Delete (Windows)
Cmd + Shift + Delete (Mac)

# 或者使用无痕模式
Ctrl + Shift + N (Windows)
Cmd + Shift + N (Mac)
```

#### 4. 检查终端输出

开发服务器终端应该显示：

```
✓ xx modules transformed.
```

如果看到错误信息，请仔细阅读并修复。

#### 5. 强制重启

```bash
# 停止当前服务器（Ctrl+C）
# 删除临时文件
rm -rf node_modules/.vite

# 重新启动
npm run dev
```

#### 6. 检查 Node 版本

```bash
node -v
# 应该是 v16.x 或更高版本

npm -v
# 应该是 v8.x 或更高版本
```

## 🎯 测试功能

### 1. 登录页面
由于没有后端，扫码登录会失败，但页面应该正常显示。

### 2. 测试路由
在地址栏输入：
- `http://localhost:3000/login` - 登录页
- `http://localhost:3000/404` - 404页面（会看到404错误页）

### 3. 临时跳过登录（开发调试用）

如果你想直接看到主页面，可以临时在浏览器控制台执行：

```javascript
// 设置一个假的token
localStorage.setItem('ai_teacher_token', JSON.stringify('fake-token-for-dev'))

// 刷新页面
location.reload()
```

这样就可以进入主页面查看对话界面了。

## 📊 开发服务器配置

开发服务器配置在 `vite.config.ts`：

```typescript
server: {
  port: 3000,  // 端口号
  proxy: {
    '/api': {
      target: 'http://localhost:8080',  // 后端API地址
      changeOrigin: true,
    },
  },
}
```

**注意：** 目前后端还没有启动，所以API请求会失败（404），这是正常的。

## 🛠️ 其他有用的命令

```bash
# 类型检查
npm run build  # 会先运行 vue-tsc 检查类型

# 预览生产构建
npm run build
npm run preview

# 查看依赖树
npm list --depth=0
```

## 📱 移动端测试

1. 确保手机和电脑在同一WiFi
2. 查看终端中的 Network 地址（如 `192.168.1.100:3000`）
3. 在手机浏览器中访问该地址

## 🐛 仍然有问题？

请提供以下信息：

1. **浏览器控制台截图**（Console 和 Network 标签）
2. **终端输出截图**
3. **Node 和 npm 版本**
4. **操作系统版本**

## ✨ 下一步

一旦页面正常显示：

1. ✅ 前端部分已完成
2. ⏭️ 接下来需要搭建后端服务
3. 🔗 对接前后端API
4. 🧪 进行完整测试

---

**最后更新：** 2025-11-21

