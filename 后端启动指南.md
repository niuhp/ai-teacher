# 🚀 后端快速启动指南

## ✅ 已完成的工作

### 1. 项目基础架构 ✅
- ✅ Maven 项目配置 (pom.xml)
- ✅ Spring Boot 3.2.0 + Java 17
- ✅ MyBatis-Plus 3.5.5 集成
- ✅ 数据库连接池 (Druid)
- ✅ Redis 缓存配置
- ✅ JWT 认证依赖

### 2. 配置文件 ✅
- ✅ application.yml (主配置)
- ✅ application-dev.yml (开发环境)
- ✅ application-prod.yml (生产环境)
- ✅ 数据库、Redis、AI模型配置

### 3. 数据库设计 ✅
- ✅ 完整建表SQL (schema.sql)
- ✅ 8张核心表设计
- ✅ 索引优化
- ✅ 测试数据插入

### 4. 基础类 ✅
- ✅ AiTeacherApplication (启动类)
- ✅ Result (统一响应)
- ✅ ResultCode (状态码枚举)
- ✅ PageResult (分页响应)

## 📋 接下来需要做的

### 待实现模块（按优先级）

1. **配置类** - 必需
   - [ ] CorsConfig (跨域配置)
   - [ ] MyBatisPlusConfig (分页等)
   - [ ] RedisConfig
   - [ ] JwtConfig

2. **实体类 (Entity)** - 必需
   - [ ] User
   - [ ] Conversation
   - [ ] Message
   - [ ] QrCodeLogin
   - [ ] File

3. **Mapper 接口** - 必需
   - [ ] UserMapper
   - [ ] ConversationMapper
   - [ ] MessageMapper
   - [ ] QrCodeLoginMapper

4. **Service 服务层** - 核心
   - [ ] UserService
   - [ ] AuthService (登录、JWT)
   - [ ] QrCodeLoginService (扫码登录)
   - [ ] ConversationService
   - [ ] MessageService

5. **Controller 控制器** - 对外接口
   - [ ] AuthController
   - [ ] UserController
   - [ ] ConversationController
   - [ ] FileController

6. **工具类** - 辅助
   - [ ] JwtUtil (JWT生成/验证)
   - [ ] RedisUtil (Redis操作)
   - [ ] QrCodeUtil (二维码生成)

7. **异常处理** - 必需
   - [ ] GlobalExceptionHandler
   - [ ] BusinessException

8. **AI 模型接入** - 核心功能
   - [ ] AIModelService (统一接口)
   - [ ] QwenService (通义千问)
   - [ ] HunyuanService (腾讯元宝)
   - [ ] DeepSeekService

## 🎯 最小可运行版本（MVP）

为了快速验证前后端联调，我建议先实现：

### Phase 1: 基础功能（2-3小时）
1. ✅ 项目配置（已完成）
2. ✅ 数据库建表（已完成）
3. [ ] 配置类（30分钟）
4. [ ] User实体和Mapper（30分钟）
5. [ ] AuthController + UserService（1小时）
   - 生成二维码接口（Mock）
   - 查询登录状态接口（Mock）
   - 获取用户信息接口
6. [ ] 跨域配置（5分钟）

**完成后就能与前端联调登录功能！**

### Phase 2: 对话功能（3-4小时）
7. [ ] Conversation、Message实体和Mapper（1小时）
8. [ ] ConversationController + Service（2小时）
   - 创建对话
   - 发送消息（先返回固定文本）
   - 获取对话列表
9. [ ] AI模型接入（1小时）
   - 简单接入一个AI模型

**完成后就能进行完整的对话测试！**

### Phase 3: 完善功能（后续）
- 文件上传
- 教材管理
- 多AI模型支持
- 性能优化

## 📝 当前状态

```
项目进度: ████████░░░░░░░░░░ 40%

✅ 已完成:
  - 项目结构搭建
  - Maven依赖配置
  - 数据库设计
  - 基础架构类

⏳ 进行中:
  - 业务代码开发

🔜 待开始:
  - AI模型接入
  - 文件处理
  - 测试与优化
```

## 🚀 快速启动步骤

### 1. 安装依赖

确保已安装：
- ✅ JDK 17
- ✅ Maven 3.8+
- ✅ MySQL 8.0+
- ✅ Redis (可选，初期可以不用)

### 2. 创建数据库

```bash
# 方式1: 命令行
mysql -u root -p < /Users/niuhaipeng/code-niuhp/ai-teacher/server/src/main/resources/db/schema.sql

# 方式2: MySQL Workbench
# 打开 schema.sql 文件并执行
```

### 3. 修改配置

编辑 `server/src/main/resources/application.yml`:

```yaml
spring:
  datasource:
    username: root
    password: 你的MySQL密码  # 修改这里
```

### 4. 启动项目

```bash
cd /Users/niuhaipeng/code-niuhp/ai-teacher/server

# 使用 Maven 启动（推荐）
mvn spring-boot:run

# 或者使用 IDE 直接运行 AiTeacherApplication.java
```

成功启动后会看到：

```
====================================
🎓 AI教师系统启动成功！
📚 智能学习助手已就绪
🌐 访问地址: http://localhost:8080/api
====================================
```

### 5. 测试接口

```bash
# 测试基础接口
curl http://localhost:8080/api/health

# 如果返回 404 是正常的（因为还没实现具体接口）
```

## 🔧 开发建议

### 1. 使用 IDE

推荐使用：
- **IntelliJ IDEA** (最佳)
- Eclipse
- VS Code + Java插件

### 2. 热重载

IDEA 中开启 Spring Boot DevTools：
- Build → Build Project (Ctrl+F9)
- 自动重启应用

### 3. 数据库工具

推荐：
- **Navicat**
- MySQL Workbench
- DataGrip (IDEA内置)

### 4. API 测试工具

推荐：
- **Apifox** (国产，功能强大)
- Postman
- cURL

## 📚 学习资源

- [Spring Boot 官方文档](https://spring.io/projects/spring-boot)
- [MyBatis-Plus 文档](https://baomidou.com/)
- [JWT 介绍](https://jwt.io/)

## 🐛 预期问题

### 问题1: MySQL连接失败

```
解决：
1. 确认MySQL已启动
2. 确认密码正确
3. 确认数据库 ai_teacher 已创建
```

### 问题2: Redis连接失败

```
解决：
1. 初期可以先注释掉 Redis 相关配置
2. 或者启动 Redis: redis-server
```

### 问题3: 端口 8080 被占用

```
解决：
修改 application.yml 中的端口：
server:
  port: 8081
```

## 💡 下一步

1. **先启动后端项目**，确保能正常运行
2. **实现最基础的接口**（健康检查、用户信息）
3. **与前端联调**，验证跨域配置
4. **逐步实现业务功能**

## 🎉 总结

目前后端架构已搭建完成：
- ✅ Spring Boot 项目结构
- ✅ Maven 依赖配置
- ✅ 数据库表设计
- ✅ 配置文件
- ✅ 基础响应类

**接下来只需要实现具体的业务代码即可！**

我们可以一边开发一边与前端联调，优先实现登录和对话核心功能。

---

**准备好开始编码了吗？** 🚀

让我知道您想先实现哪个模块，我会立即帮您完成！

